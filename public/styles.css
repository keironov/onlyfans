:root{
  --bg-primary:#0a0e1a;
  --bg-secondary:#0f1419;
  --glass-bg:rgba(255,255,255,0.03);
  --glass-border:rgba(255,255,255,0.08);
  --text-primary:#e8f0ff;
  --text-secondary:#8b92a8;
  --accent:#f59e0b;
  --accent-hover:#fbbf24;
  --accent-green:#10b981;
  --accent-red:#ef4444;
  --accent-blue:#3b82f6;
  --accent-purple:#a855f7;
  --shadow:0 8px 32px rgba(0,0,0,0.4);
}

*{box-sizing:border-box;margin:0;padding:0;}

html,body{
  height:100%;
  background:radial-gradient(ellipse at top, #1a1f35 0%, var(--bg-primary) 50%);
  color:var(--text-primary);
  font-family:'Inter',-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;
  overflow-x:hidden;
}

body::before{
  content:'';
  position:fixed;
  top:0;left:0;right:0;bottom:0;
  background:
    radial-gradient(circle at 20% 30%, rgba(245,158,11,0.08) 0%, transparent 50%),
    radial-gradient(circle at 80% 70%, rgba(59,130,246,0.06) 0%, transparent 50%);
  pointer-events:none;
  z-index:0;
}

.wrap{
  max-width:1600px;
  margin:0 auto;
  padding:24px;
  position:relative;
  z-index:1;
}

.top{
  display:flex;
  gap:16px;
  align-items:center;
  justify-content:space-between;
  margin-bottom:24px;
  padding:24px;
  background:var(--glass-bg);
  backdrop-filter:blur(20px);
  border-radius:24px;
  border:1px solid var(--glass-border);
  box-shadow:var(--shadow);
}

.top h1{
  font-size:32px;
  font-weight:700;
  background:linear-gradient(135deg, var(--accent) 0%, var(--accent-hover) 100%);
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
  margin-bottom:4px;
}

.muted{color:var(--text-secondary);font-size:14px;}
.small{font-size:13px;color:var(--text-secondary);}

.card{
  background:var(--glass-bg);
  backdrop-filter:blur(20px);
  border-radius:24px;
  padding:24px;
  border:1px solid var(--glass-border);
  box-shadow:var(--shadow);
  margin-bottom:20px;
  transition:all 0.3s ease;
}

.card:hover{
  border-color:rgba(245,158,11,0.2);
  box-shadow:0 12px 48px rgba(0,0,0,0.5);
  transform:translateY(-2px);
}

.card h3{
  font-size:20px;
  font-weight:600;
  margin-bottom:16px;
  color:var(--text-primary);
}

.grid{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:20px;
}

.grid-3{
  display:grid;
  grid-template-columns:repeat(3, 1fr);
  gap:20px;
}

.grid-4{
  display:grid;
  grid-template-columns:repeat(4, 1fr);
  gap:16px;
}

input,textarea,select{
  width:100%;
  padding:12px 16px;
  border-radius:16px;
  border:1px solid var(--glass-border);
  background:rgba(255,255,255,0.02);
  color:var(--text-primary);
  outline:none;
  transition:all 0.3s ease;
  font-size:14px;
}

input:focus,textarea:focus,select:focus{
  background:rgba(255,255,255,0.04);
  border-color:var(--accent);
  box-shadow:0 0 0 3px rgba(245,158,11,0.1);
}

select {
  appearance: none;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%238b92a8' d='M6 9L1 4h10z'/%3E%3C/svg%3E");
  background-repeat: no-repeat;
  background-position: right 12px center;
  padding-right: 36px;
  cursor: pointer;
}

select option {
  background: var(--bg-secondary);
  color: var(--text-primary);
  padding: 12px;
}

input[type="date"] {
  position: relative;
  cursor: pointer;
}

input[type="number"]{
  width:90px;
  text-align:center;
}

button{
  background:linear-gradient(135deg, var(--accent) 0%, var(--accent-hover) 100%);
  color:#0a0e1a;
  border:none;
  padding:12px 24px;
  border-radius:16px;
  cursor:pointer;
  font-weight:600;
  font-size:14px;
  transition:all 0.3s ease;
  box-shadow:0 4px 16px rgba(245,158,11,0.3);
}

button:hover{
  transform:translateY(-2px);
  box-shadow:0 6px 24px rgba(245,158,11,0.4);
}

button:active{
  transform:translateY(0);
}

button.secondary{
  background:rgba(255,255,255,0.05);
  color:var(--text-primary);
  border:1px solid var(--glass-border);
  box-shadow:none;
}

button.secondary:hover{
  background:rgba(255,255,255,0.08);
  border-color:var(--accent);
}

button.danger{
  background:linear-gradient(135deg, var(--accent-red) 0%, #dc2626 100%);
  color:#fff;
  box-shadow:0 4px 16px rgba(239,68,68,0.3);
}

button.small-btn{
  padding:8px 16px;
  font-size:12px;
}

.action-btn{
  width:40px;
  height:40px;
  border-radius:12px;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  font-weight:700;
  cursor:pointer;
  border:none;
  transition:all 0.3s ease;
}

.approve{
  background:linear-gradient(135deg, var(--accent-green) 0%, #059669 100%);
  color:#fff;
  box-shadow:0 4px 12px rgba(16,185,129,0.3);
}

.approve:hover{transform:scale(1.05);}

.reject{
  background:linear-gradient(135deg, var(--accent-red) 0%, #dc2626 100%);
  color:#fff;
  box-shadow:0 4px 12px rgba(239,68,68,0.3);
}

.reject:hover{transform:scale(1.05);}

table{
  width:100%;
  border-collapse:separate;
  border-spacing:0 8px;
}

th,td{
  padding:12px 16px;
  text-align:left;
  vertical-align:middle;
}

thead th{
  color:var(--text-secondary);
  font-weight:600;
  font-size:13px;
  text-transform:uppercase;
  letter-spacing:0.5px;
  border-bottom:1px solid var(--glass-border);
}

tbody tr{
  background:rgba(255,255,255,0.02);
  border-radius:12px;
  transition:all 0.3s ease;
}

tbody tr:hover{
  background:rgba(255,255,255,0.04);
  transform:translateX(4px);
}

.table-select{
  width:160px;
  padding:8px 12px;
  border-radius:12px;
}

canvas{max-width:100%;border-radius:16px;}

.tabs{
  display:flex;
  gap:12px;
  margin-bottom:24px;
  padding:8px;
  background:var(--glass-bg);
  backdrop-filter:blur(20px);
  border-radius:20px;
  border:1px solid var(--glass-border);
  flex-wrap:wrap;
}

.tab{
  padding:12px 24px;
  cursor:pointer;
  border-radius:14px;
  transition:all 0.3s ease;
  font-weight:500;
  color:var(--text-secondary);
}

.tab:hover{
  background:rgba(255,255,255,0.05);
  color:var(--text-primary);
}

.tab.active{
  background:linear-gradient(135deg, var(--accent) 0%, var(--accent-hover) 100%);
  color:#0a0e1a;
  box-shadow:0 4px 16px rgba(245,158,11,0.3);
}

.tab-content{display:none;}

/* --- Исправленные блоки статистики --- */
.stats {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
  gap: 16px;
}

.stat-card{
  background:rgba(255,255,255,0.03);
  border-radius:16px;
  padding:20px;
  border:1px solid var(--glass-border);
  transition:all 0.3s ease;
  text-align:center;
  min-height:110px;
  overflow:hidden;
}

.stat-card:hover{
  background:rgba(255,255,255,0.05);
  border-color:var(--accent);
  transform:translateY(-2px);
}

.stat-number{
  font-size:32px;
  font-weight:700;
  background:linear-gradient(135deg, var(--accent) 0%, var(--accent-hover) 100%);
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
  margin-bottom:4px;
}

.stat-label{
  font-size:13px;
  color:var(--text-secondary);
  text-transform:uppercase;
  letter-spacing:0.5px;
}

.user-row{
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:12px 16px;
  margin:6px 0;
  border-radius:12px;
  background:rgba(255,255,255,0.02);
  border:1px solid var(--glass-border);
  transition:all 0.3s ease;
  gap:12px;
}

.user-row:hover{
  background:rgba(255,255,255,0.04);
  border-color:var(--accent);
}

.team-list{
  max-height:500px;
  overflow:auto;
  padding:8px;
}

.team-list::-webkit-scrollbar{width:8px;}
.team-list::-webkit-scrollbar-track{background:rgba(255,255,255,0.02);border-radius:8px;}
.team-list::-webkit-scrollbar-thumb{background:var(--accent);border-radius:8px;}

.period-buttons{
  display:flex;
  gap:8px;
  margin-bottom:16px;
  flex-wrap:wrap;
}

.period-btn{
  padding:8px 16px;
  border-radius:12px;
  background:rgba(255,255,255,0.05);
  border:1px solid var(--glass-border);
  color:var(--text-secondary);
  cursor:pointer;
  transition:all 0.3s ease;
  font-size:13px;
}

.period-btn:hover{
  background:rgba(255,255,255,0.08);
  color:var(--text-primary);
}

.period-btn.active{
  background:linear-gradient(135deg, var(--accent) 0%, var(--accent-hover) 100%);
  color:#0a0e1a;
  border-color:var(--accent);
}

.date-range-picker{
  display:flex;
  gap:12px;
  align-items:center;
  margin-top:12px;
  padding:12px;
  background:rgba(255,255,255,0.02);
  border-radius:12px;
  border:1px solid var(--glass-border);
}

.note-item{
  padding:12px;
  margin:8px 0;
  background:rgba(255,255,255,0.03);
  border-radius:12px;
  border:1px solid var(--glass-border);
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap:12px;
}

.note-item:hover{
  background:rgba(255,255,255,0.05);
}

.notes-list{
  max-height:300px;
  overflow:auto;
}

/* Rankings */
.ranking-list{
  display:flex;
  flex-direction:column;
  gap:12px;
  min-height:300px;
}

.ranking-item{
  display:flex;
  align-items:center;
  gap:16px;
  padding:16px;
  background:rgba(255,255,255,0.03);
  border-radius:16px;
  border:1px solid var(--glass-border);
  transition:all 0.3s ease;
}

.ranking-item:hover{
  background:rgba(255,255,255,0.05);
  transform:translateX(4px);
}

.ranking-position{
  font-size:28px;
  font-weight:700;
  width:50px;
  text-align:center;
}

.ranking-position.gold{
  background:linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%);
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
}

.ranking-position.silver{
  background:linear-gradient(135deg, #e5e7eb 0%, #9ca3af 100%);
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
}

.ranking-position.bronze{
  background:linear-gradient(135deg, #f97316 0%, #ea580c 100%);
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
}

.ranking-info{
  flex:1;
}

.ranking-name{
  font-weight:600;
  font-size:16px;
  color:var(--text-primary);
  margin-bottom:4px;
}

.ranking-role{
  font-size:12px;
  color:var(--text-secondary);
}

.ranking-score{
  text-align:right;
}

.ranking-total{
  font-size:24px;
  font-weight:700;
  color:var(--accent);
}

.ranking-details{
  font-size:11px;
  color:var(--text-secondary);
}

/* Personal Notes (Sticky Style) */
.notes-board{
  display:grid;
  grid-template-columns:repeat(auto-fill, minmax(280px, 1fr));
  gap:20px;
  margin-top:20px;
}

.sticky-note{
  background:var(--note-color, #f59e0b);
  padding:20px;
  border-radius:8px;
  box-shadow:0 4px 12px rgba(0,0,0,0.3);
  position:relative;
  min-height:200px;
  transition:all 0.3s ease;
  cursor:pointer;
}

.sticky-note:hover{
  transform:translateY(-4px) rotate(1deg);
  box-shadow:0 8px 24px rgba(0,0,0,0.4);
}

.sticky-note.completed{
  opacity:0.6;
  transform:rotate(-2deg);
}

.sticky-note.completed::before{
  content:'';
  position:absolute;
  top:50%;
  left:10%;
  right:10%;
  height:2px;
  background:rgba(0,0,0,0.4);
  transform:translateY(-50%);
}

.sticky-note-header{
  display:flex;
  justify-content:space-between;
  align-items:flex-start;
  margin-bottom:12px;
}

.sticky-note-title{
  font-size:18px;
  font-weight:700;
  color:rgba(0,0,0,0.9);
  flex:1;
}

.sticky-note-actions{
  display:flex;
  gap:8px;
}

.sticky-note-btn{
  width:28px;
  height:28px;
  border-radius:8px;
  background:rgba(0,0,0,0.1);
  border:none;
  cursor:pointer;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:14px;
  transition:all 0.2s ease;
}

.sticky-note-btn:hover{
  background:rgba(0,0,0,0.2);
  transform:scale(1.1);
}

.sticky-note-content{
  color:rgba(0,0,0,0.8);
  font-size:14px;
  line-height:1.6;
  word-wrap:break-word;
}

.sticky-note-date{
  position:absolute;
  bottom:12px;
  right:12px;
  font-size:11px;
  color:rgba(0,0,0,0.5);
}

.color-picker{
  display:flex;
  gap:8px;
}

.color-option{
  width:32px;
  height:32px;
  border-radius:8px;
  cursor:pointer;
  border:2px solid transparent;
  transition:all 0.2s ease;
}

.color-option:hover{
  transform:scale(1.1);
  border-color:var(--text-primary);
}

.color-option.selected{
  border-color:var(--text-primary);
  box-shadow:0 0 0 2px var(--bg-primary);
}

@media (max-width:1200px){
  .grid,.grid-3,.grid-4{grid-template-columns:1fr;}
  .wrap{padding:16px;}
  .notes-board{grid-template-columns:1fr;}
}

@keyframes fadeIn{
  from{opacity:0;transform:translateY(10px);}
  to{opacity:1;transform:translateY(0);}
}

.card{animation:fadeIn 0.5s ease;}
